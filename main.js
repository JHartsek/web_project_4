(()=>{"use strict";var e="";const t=e+"50fce9df697a07971411.svg",n=e+"7a0b85df4e06c9be0cf6.jpg",r=e+"8f7af7ee8641b74b1e28.jpg";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleDelete",(function(){o._post.remove(),o._post=null})),i(this,"_handleLike",(function(e){e.target.classList.toggle("post__caption-like__button_active")})),this._title=t.title,this._link=t.link,this.templateSelector=n,this._handleCardClick=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return this._postTemplateElement=document.querySelector(this.templateSelector),this._postTemplate=this._postTemplateElement.content,this._postElement=this._postTemplate.querySelector(".post").cloneNode(!0),this._postElement}},{key:"createPost",value:function(){return this._post=this._getTemplate(),this._postImageElement=this._post.querySelector(".post__image"),this._postImageElement.setAttribute("src",this._link),this._postImageElement.setAttribute("alt",this._title),this._postCaptionTextElement=this._post.querySelector(".post__caption-text"),this._postCaptionTextElement.textContent=this._title,this._setEventListeners(),this._post}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton=this._post.querySelector(".post__delete"),this._deleteButton.addEventListener("click",this._handleDelete),this._image=this._post.querySelector(".post__image"),this._image.addEventListener("click",(function(){e._handleCardClick(e._title,e._link)})),this._likeButton=this._post.querySelector(".post__caption-like__button"),this._likeButton.addEventListener("click",this._handleLike)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=l((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-input-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),a(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-input-error"));e.classList.remove(r._inputErrorClass),t.textContent=" ",t.classList.remove(r._errorClass)})),a(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),a(this,"_hasInvalidInput",(function(){return r._formInputs.some((function(e){return!e.validity.valid}))})),a(this,"resetValidation",(function(){r.toggleSubmitButton(),r._formInputs.forEach((function(e){r._hideInputError(e)}))})),a(this,"toggleSubmitButton",(function(){r._hasInvalidInput(r._formInputs)?(r._submitButton.classList.add(r._inactiveButtonClass),r._submitButton.setAttribute("disabled",!0)):(r._submitButton.classList.remove(r._inactiveButtonClass),r._submitButton.removeAttribute("disabled"))})),a(this,"_setEventListeners",(function(){r.toggleSubmitButton(r._formInputs,r._submitButton),r._formInputs.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleSubmitButton(r._formInputs,r._submitButton)}))}))})),a(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._setEventListeners()})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._formInputs=Array.from(this._formElement.querySelectorAll(this._inputSelector))}));function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=f((function e(t,n){var r=this,o=t.items,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"renderElements",(function(){r._items.forEach((function(e){r._renderer(e)}))})),m(this,"addItem",(function(e){r._container.prepend(e)})),this._items=o,this._renderer=i,this._container=document.querySelector(n)}));function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_handleOverlayClick",(function(e){e.target===e.currentTarget&&n.close()})),y(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popupSelector=t,this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popupElement.addEventListener("mousedown",this._handleOverlayClick)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(r){var o=O(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return g(this,e)});function i(e,t,n){var r,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),j(E(u=o.call(this,e)),"_setImagePopupAttributes",(function(e,t){u._image.setAttribute("src",t),u._image.setAttribute("alt",e),u._imageCaption.textContent=e})),j(E(u),"open",(function(e,t){w((r=E(u),O(i.prototype)),"open",r).call(r),u._setImagePopupAttributes(e,t)})),u._image=document.querySelector(".popup__image"),u._imageCaption=document.querySelector(".popup__image-caption"),u}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(b);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function L(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=x(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),R(B(r=i.call(this,e)),"getInputValues",(function(){return r._userInputs={},r._inputFields.forEach((function(e){r._userInputs[e.name]=e.value})),r._userInputs})),R(B(r),"close",(function(){q((n=B(r),T(u.prototype)),"close",n).call(n),r._form.reset()})),r._form=r._popupElement.querySelector(".form"),r._submitHandler=t,r._inputFields=r._form.querySelectorAll(".form__input"),r}return t=u,(n=[{key:"setEventListeners",value:function(){q(T(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitHandler)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(b);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t){var n=t.nameElementSelector,r=t.aboutElementSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameElement=document.querySelector(n),this._profileAboutMeElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._currentUserInfo={name:this._profileNameElement.textContent,about:this._profileAboutMeElement.textContent},this._currentUserInfo}},{key:"setUserInfo",value:function(e,t){this._profileNameElement.textContent=e,this._profileAboutMeElement.textContent=t}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),U=document.querySelector(".profile__info-edit-button"),M=document.querySelector(".profile-edit-form"),N=document.querySelector("#name"),F=document.querySelector("#about-me"),H=document.querySelector(".profile__add-button"),Y=document.querySelector(".add-post-form"),z={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"form__input_type_invalid",errorClass:"form__input-error_active"},G=document.querySelector("#logo-image"),J=document.querySelector("#avatar-image"),K=document.querySelector("#initial-popup-image"),Q=new k("#focus-image-popup");function W(e){return new u(e,".template__post",(function(e,t){Q.open(e,t)})).createPost()}Q.setEventListeners();var X=new _({items:[{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"},{title:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"}],renderer:function(e){var t=W(e);X.addItem(t)}},".posts-grid");X.renderElements();var Z=new c(z,Y);Z.enableValidation();var $=new c(z,M);$.enableValidation();var ee=new A("#edit-profile-popup",(function(e){e.preventDefault();var t=ee.getInputValues();ne.setUserInfo(t.name,t["about-me"]),ee.close()}));ee.setEventListeners();var te=new A("#add-post-popup",(function(e){e.preventDefault();var t=W(te.getInputValues());X.addItem(t),te.close()}));te.setEventListeners();var ne=new D({nameElementSelector:".profile__info-name",aboutElementSelector:".profile__info-descriptor"});H.addEventListener("click",(function(){Z.resetValidation(),te.open()})),U.addEventListener("click",(function(){var e;$.resetValidation(),ee.open(),e=ne.getUserInfo(),N.value=e.name,F.value=e.about})),G.src=t,J.src=n,K.src=r})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG9CQUFxQixzQkFDckJDLHFCQUFzQiw4QkFtQ3hCUyxFQUFjdkYsaUJBQWlCLFNBQVMsV0FDdENzRyxFQUFrQlMsa0JBYmxCRCxHQUFhZCxVQWdCZmIsRUFBa0JuRixpQkFBaUIsU0FBUyxXQS9CNUMsSUFMUWdILEVBcUNOUixFQUFzQk8sa0JBL0J0Qk4sR0FBaUJULE9BTlhnQixFQUFrQkosR0FBS0ssY0FDN0I1QixFQUFVYixNQUFRd0MsRUFBZ0IvQyxLQUNsQ3FCLEVBQVdkLE1BQVF3QyxFQUFnQjlCLFNBeUNyQ1MsRUFBaUJ1QixJQUFNQyxFQUN2QnZCLEVBQW1Cc0IsSUFBTUUsRUFDekJ2QixFQUF5QnFCLElBQU1HLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy50ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7IFxuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX3Bvc3RUZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMudGVtcGxhdGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9zdFRlbXBsYXRlID0gdGhpcy5fcG9zdFRlbXBsYXRlRWxlbWVudC5jb250ZW50O1xuICAgIHRoaXMuX3Bvc3RFbGVtZW50ID0gdGhpcy5fcG9zdFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIucG9zdFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3RFbGVtZW50O1xuICB9XG5cbiAgY3JlYXRlUG9zdCgpIHtcbiAgICB0aGlzLl9wb3N0ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9wb3N0SW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9zdC5xdWVyeVNlbGVjdG9yKFwiLnBvc3RfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3Bvc3RJbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2xpbmspO1xuICAgIHRoaXMuX3Bvc3RJbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX3RpdGxlKTtcbiAgICB0aGlzLl9wb3N0Q2FwdGlvblRleHRFbGVtZW50ID0gdGhpcy5fcG9zdC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucG9zdF9fY2FwdGlvbi10ZXh0XCJcbiAgICApO1xuICAgIHRoaXMuX3Bvc3RDYXB0aW9uVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9wb3N0O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX3Bvc3QucXVlcnlTZWxlY3RvcihcIi5wb3N0X19kZWxldGVcIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xuXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3N0LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdF9faW1hZ2VcIik7XG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90aXRsZSwgdGhpcy5fbGluayk7XG4gICAgfSlcblxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9wb3N0LnF1ZXJ5U2VsZWN0b3IoXCIucG9zdF9fY2FwdGlvbi1saWtlX19idXR0b25cIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xuICAgIHRoaXMuX3Bvc3QucmVtb3ZlKCk7XG4gICAgdGhpcy5fcG9zdCA9IG51bGw7XG4gIH07XG5cbiAgX2hhbmRsZUxpa2UgPSAoZXZlbnQpID0+IHtcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcInBvc3RfX2NhcHRpb24tbGlrZV9fYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7IFxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50OyBcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIH0gXG5cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTsgXG4gICAgICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+e1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0cy5zb21lKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU3VibWl0QnV0dG9uKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHRvZ2dsZVN1Ym1pdEJ1dHRvbiA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9mb3JtSW5wdXRzKSkge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpOyBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTdWJtaXRCdXR0b24odGhpcy5fZm9ybUlucHV0cywgdGhpcy5fc3VibWl0QnV0dG9uKTtcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVN1Ym1pdEJ1dHRvbih0aGlzLl9mb3JtSW5wdXRzLCB0aGlzLl9zdWJtaXRCdXR0b24pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSlcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvciAoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IFxuICAgIH1cblxuICAgIHJlbmRlckVsZW1lbnRzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgYWRkSXRlbSA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbiAgICB9XG5cbiAgICBvcGVuICgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlICgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVPdmVybGF5Q2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpOyBcbiAgICAgICAgfVxuICAgIH1cbiAgXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpOyBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzICgpIHsgXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xuICAgIH1cbn1cbiAgIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnOyBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7IFxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHRpdGxlLCBsaW5rKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jYXB0aW9uJyk7XG4gICAgfVxuXG4gICAgX3NldEltYWdlUG9wdXBBdHRyaWJ1dGVzID0gKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBsaW5rKTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBuYW1lKTtcbiAgICAgICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB9XG5cbiAgICBvcGVuID0gKG5hbWUsIGxpbmspID0+IHsgXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fc2V0SW1hZ2VQb3B1cEF0dHJpYnV0ZXMobmFtZSwgbGluayk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJzsgXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5faW5wdXRGaWVsZHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xuICAgIH1cblxuICAgIGdldElucHV0VmFsdWVzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl91c2VySW5wdXRzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fdXNlcklucHV0c1tpbnB1dC5uYW1lXSA9ICBpbnB1dC52YWx1ZTsgXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5wdXRzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zdWJtaXRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBjbG9zZSA9ICgpID0+IHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTsgXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgdXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgbmFtZUVsZW1lbnRTZWxlY3RvciwgYWJvdXRFbGVtZW50U2VsZWN0b3J9KSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZUVsZW1lbnRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBYm91dE1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRFbGVtZW50U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvICgpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFVzZXJJbmZvID0ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX3Byb2ZpbGVBYm91dE1lRWxlbWVudC50ZXh0Q29udGVudFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFVzZXJJbmZvO1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvIChuYW1lLCBhYm91dCkge1xuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9wcm9maWxlQWJvdXRNZUVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB9XG59IiwiY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8tZWRpdC1idXR0b25cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGUtZWRpdC1mb3JtXCIpO1xuXG5jb25zdCBuYW1lRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZScpO1xuY29uc3QgYWJvdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1tZScpO1xuXG5jb25zdCBhZGRQb3N0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkUG9zdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wb3N0LWZvcm1cIik7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJMYXRlbWFyXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG5dO1xuXG5jb25zdCBjbGFzc2VzID0ge1xuICAgIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICAgIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3NhdmUtYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2ludmFsaWRcIixcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcblxuY29uc3QgbG9nb0ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dvLWltYWdlJyk7XG5cbmNvbnN0IGF2YXRhckltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXItaW1hZ2UnKTtcblxuY29uc3QgaW5pdGlhbFBvcHVwSW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luaXRpYWwtcG9wdXAtaW1hZ2UnKTtcblxuZXhwb3J0IHsgZWRpdFByb2ZpbGVCdXR0b24sIGVkaXRQcm9maWxlRm9ybSwgbmFtZUZpZWxkLCBhYm91dEZpZWxkLCBhZGRQb3N0QnV0dG9uLCBhZGRQb3N0Rm9ybSwgaW5pdGlhbENhcmRzLCBjbGFzc2VzLCBcbiAgbG9nb0ltYWdlRWxlbWVudCwgYXZhdGFySW1hZ2VFbGVtZW50LCBpbml0aWFsUG9wdXBJbWFnZUVsZW1lbnR9IiwiLy8gbG9hZCBzdHlsZXNoZWV0c1xuaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuXG4vLyBsb2FkIGltYWdlcyBcbmltcG9ydCBsb2dvSW1hZ2VGaWxlIGZyb20gJy4uL2ltYWdlcy9sb2dvLnN2Zyc7IFxuaW1wb3J0IGF2YXRhckltYWdlRmlsZSBmcm9tICcuLi9pbWFnZXMvYXZhdGFyLmpwZyc7XG5pbXBvcnQgaW5pdGlhbFBvcHVwSW1hZ2VGaWxlIGZyb20gJy4uL2ltYWdlcy9sYXRlbWFyLmpwZyc7XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCB7IGVkaXRQcm9maWxlQnV0dG9uLCBlZGl0UHJvZmlsZUZvcm0sIG5hbWVGaWVsZCwgYWJvdXRGaWVsZCwgYWRkUG9zdEJ1dHRvbiwgYWRkUG9zdEZvcm0sIGluaXRpYWxDYXJkcywgY2xhc3NlcywgXG4gIGxvZ29JbWFnZUVsZW1lbnQsIGF2YXRhckltYWdlRWxlbWVudCwgaW5pdGlhbFBvcHVwSW1hZ2VFbGVtZW50fSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnOyBcblxuXG4vLyBsb2FkIGluaXRpYWwgY2FyZHNcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjZm9jdXMtaW1hZ2UtcG9wdXBcIik7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQgKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiLnRlbXBsYXRlX19wb3N0XCIsIChuYW1lLCBsaW5rKSA9PiB7XG4gICAgaW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xuICB9KVxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlUG9zdCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLnBvc3RzLWdyaWRcIlxuKTtcbmNhcmRTZWN0aW9uLnJlbmRlckVsZW1lbnRzKCk7XG5cblxuLy8gdmFpZGF0ZSBmb3Jtc1xuY29uc3QgYWRkUG9zdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjbGFzc2VzLCBhZGRQb3N0Rm9ybSk7XG5hZGRQb3N0VmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBlZGl0UHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjbGFzc2VzLCBlZGl0UHJvZmlsZUZvcm0pO1xuZWRpdFByb2ZpbGVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG4vLyBjcmVhdGUgcG9wdXAgaW5zdGFuY2VzXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZWRpdC1wcm9maWxlLXBvcHVwXCIsIGhhbmRsZVNhdmVQcm9maWxlQ2hhbmdlcyk7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBhZGRQb3N0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtcG9zdC1wb3B1cFwiLCBoYW5kbGVDcmVhdGVQb3N0KTtcbmFkZFBvc3RQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbi8vIGVkaXQgcHJvZmlsZVxuY29uc3QgdXNlciA9IG5ldyB1c2VySW5mbyAoe1xuICBuYW1lRWxlbWVudFNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tbmFtZScsIFxuICBhYm91dEVsZW1lbnRTZWxlY3RvcjogJy5wcm9maWxlX19pbmZvLWRlc2NyaXB0b3InfSk7XG5cbmZ1bmN0aW9uIHNldEluaXRhbEZvcm1GaWVsZHMoKSB7XG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcbiAgbmFtZUZpZWxkLnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIGFib3V0RmllbGQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uYWJvdXQ7IFxufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZSAoKSB7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xuICBzZXRJbml0YWxGb3JtRmllbGRzKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVNhdmVQcm9maWxlQ2hhbmdlcyhldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB1c2VyRm9ybURhdGEgPSBlZGl0UHJvZmlsZVBvcHVwLmdldElucHV0VmFsdWVzKCk7XG4gIHVzZXIuc2V0VXNlckluZm8odXNlckZvcm1EYXRhLm5hbWUsIHVzZXJGb3JtRGF0YVsnYWJvdXQtbWUnXSk7XG4gIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTsgXG59XG5cblxuLy8gYWRkIHBvc3RcbmZ1bmN0aW9uIGhhbmRsZUFkZFBvc3QoKSB7XG4gIGFkZFBvc3RQb3B1cC5vcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNyZWF0ZVBvc3QoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgcG9zdEZvcm1EYXRhID0gYWRkUG9zdFBvcHVwLmdldElucHV0VmFsdWVzKCk7XG4gIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKHBvc3RGb3JtRGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oZWxlbWVudCk7XG4gIGFkZFBvc3RQb3B1cC5jbG9zZSgpO1xufVxuXG4vLyBzZXQgZXZlbnQgbGlzdGVuZXJzXG5hZGRQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBvc3RWYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xuICBoYW5kbGVBZGRQb3N0KCk7XG59KTtcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQcm9maWxlVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcbiAgaGFuZGxlRWRpdFByb2ZpbGUoKTtcbn0pO1xuXG5cbi8vc2V0IGltYWdlc1xubG9nb0ltYWdlRWxlbWVudC5zcmMgPSBsb2dvSW1hZ2VGaWxlO1xuYXZhdGFySW1hZ2VFbGVtZW50LnNyYyA9IGF2YXRhckltYWdlRmlsZTsgXG5pbml0aWFsUG9wdXBJbWFnZUVsZW1lbnQuc3JjID0gaW5pdGlhbFBvcHVwSW1hZ2VGaWxlOyAiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIl9wb3N0IiwicmVtb3ZlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJ0aGlzIiwiX3RpdGxlIiwidGl0bGUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX3Bvc3RUZW1wbGF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfcG9zdFRlbXBsYXRlIiwiY29udGVudCIsIl9wb3N0RWxlbWVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsIl9wb3N0SW1hZ2VFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiX3Bvc3RDYXB0aW9uVGV4dEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZURlbGV0ZSIsIl9pbWFnZSIsIl9saWtlQnV0dG9uIiwiX2hhbmRsZUxpa2UiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJpZCIsImFkZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9mb3JtSW5wdXRzIiwic29tZSIsImlucHV0IiwidG9nZ2xlU3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJpdGVtIiwiX3JlbmRlcmVyIiwiZWxlbWVudCIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY3VycmVudFRhcmdldCIsImNsb3NlIiwia2V5IiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVPdmVybGF5Q2xpY2siLCJQb3B1cFdpdGhJbWFnZSIsIm5hbWUiLCJfaW1hZ2VDYXB0aW9uIiwiX3NldEltYWdlUG9wdXBBdHRyaWJ1dGVzIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJfdXNlcklucHV0cyIsIl9pbnB1dEZpZWxkcyIsInZhbHVlIiwiX2Zvcm0iLCJyZXNldCIsIl9zdWJtaXRIYW5kbGVyIiwidXNlckluZm8iLCJuYW1lRWxlbWVudFNlbGVjdG9yIiwiYWJvdXRFbGVtZW50U2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVFbGVtZW50IiwiX3Byb2ZpbGVBYm91dE1lRWxlbWVudCIsIl9jdXJyZW50VXNlckluZm8iLCJhYm91dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiZWRpdFByb2ZpbGVGb3JtIiwibmFtZUZpZWxkIiwiYWJvdXRGaWVsZCIsImFkZFBvc3RCdXR0b24iLCJhZGRQb3N0Rm9ybSIsImNsYXNzZXMiLCJmb3JtU2VsZWN0b3IiLCJsb2dvSW1hZ2VFbGVtZW50IiwiYXZhdGFySW1hZ2VFbGVtZW50IiwiaW5pdGlhbFBvcHVwSW1hZ2VFbGVtZW50IiwiaW1hZ2VQb3B1cCIsImNyZWF0ZUNhcmQiLCJvcGVuIiwiY3JlYXRlUG9zdCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwicmVuZGVyRWxlbWVudHMiLCJhZGRQb3N0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwidXNlckZvcm1EYXRhIiwiZ2V0SW5wdXRWYWx1ZXMiLCJ1c2VyIiwic2V0VXNlckluZm8iLCJhZGRQb3N0UG9wdXAiLCJyZXNldFZhbGlkYXRpb24iLCJjdXJyZW50VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNyYyIsImxvZ29JbWFnZUZpbGUiLCJhdmF0YXJJbWFnZUZpbGUiLCJpbml0aWFsUG9wdXBJbWFnZUZpbGUiXSwic291cmNlUm9vdCI6IiJ9